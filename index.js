"use strict";module.exports=function e(s){let t=[],a=!1,n={},i=[],l=[],d=[],m=[],g=[],o=[],c=[],r=-1,$=null,u=!1,b=null,h={444:[2201],3037:[2201]},p={3105:[1e3],3205:[1e3],444:[1e3,1001,2e3,2001],3037:[1e3,1001,2e3,2001],2105:[1e3,1001,1002,1003,2e3],3102:[1e3,1001,1002,1003],3202:[1e3,1001,1002,1003]};function f(){t.push(s.hook(...arguments))}function _(e){switch(e){case 41:case 37:case 35:case 33:case 30:case 28:break;case 24:return D(27040)?5:4;case 19:return D(28003)?4:2;case 9:return D(27063)||D(27003)?5:3;case 5:return D(27e3)?4:2}return 1}function D(e){return!!$.find(s=>s.id==e&&s.enable)}function A(e){let s="\nAutoheal Debug... Skill: "+e.id+"	partyMemebers.length: "+i.length;for(let t=0;t<i.length;t++){s+="\n"+t+"	";let a=i[t].name;a+=" ".repeat(21-a.length);let l="	HP: "+parseFloat(i[t].hpP).toFixed(2),d="	undefined";i[t].loc&&(d="	Dist: "+(i[t].loc.dist3D(n.loc)/25).toFixed(2));let m="	Online: "+i[t].online,g="	Alive: "+i[t].alive,o="	pid: "+i[t].playerId+"  gid: "+i[t].gameId;s+=a+l+d+m+g+o}console.log(s)}s.command.add("autoheal",e=>{if(e&&(e=e.toLowerCase()),null==e)s.settings.autoHeal=!s.settings.autoHeal;else if("off"===e)s.settings.autoHeal=!1;else if("on"===e)s.settings.autoHeal=!0;else if("debug"===e){a=!a,s.command.message("Debug "+(a?"enabled":"disabled"));return}else if("test"===e){A(0);return}else if(isNaN(e)){s.command.message(e+" is an invalid argument");return}else s.settings.autoHeal=!0,s.settings.hpCutoff=e<0?0:e>100?100:e;s.command.message("Healing "+(s.settings.autoHeal?"enabled ("+s.settings.hpCutoff+"%)":"disabled"))}),s.command.add("autocleanse",e=>{if(e&&(e=e.toLowerCase()),null==e)s.settings.autoCleanse=!s.settings.autoCleanse;else if("off"===e)s.settings.autoCleanse=!1;else if("on"===e)s.settings.autoCleanse=!0;else{s.command.message(e+" is an invalid argument for cleanse command");return}s.command.message("Cleansing "+(s.settings.autoCleanse?"enabled":"disabled"))}),s.command.add("autocast",e=>{if(e&&(e=e.toLowerCase()),null==e)s.settings.autoCast=!s.settings.autoCast;else if("off"===e)s.settings.autoCast=!1;else if("on"===e)s.settings.autoCast=!0;else{s.command.message(e+" is an invalid argument for cast command");return}s.command.message("Casting "+(s.settings.autoCast?"enabled":"disabled"))}),s.command.add("autodebuff",e=>{if(e&&(e=e.toLowerCase()),null==e)s.settings.autoDebuff=!s.settings.autoDebuff;else if("off"===e)s.settings.autoDebuff=!1;else if("on"===e)s.settings.autoDebuff=!0;else{s.command.message(e+" is an invalid argument for cast command");return}s.command.message("Debuffing "+(s.settings.autoCast?"enabled":"disabled"))}),s.command.add("autopriest",e=>{e&&(e=e.toLowerCase()),null==e?(s.command.message("UwU Hi you cute healer. These are your priest settings!"),s.command.message("FH : "+(s.settings.enablePriestFH?"enabled":"disabled")),s.command.message("HI : "+(s.settings.enablePriestHI?"enabled":"disabled")),s.command.message("Plague : "+(s.settings.enablePriestPlague?"enabled":"disabled")),s.command.message("Sleep : "+(s.settings.enablePriestSleep?"enabled":"disabled")),s.command.message("EStars : "+(s.settings.enablePriestES?"enabled":"disabled"))):"fh"==e||"focus"==e?(s.settings.enablePriestFH=!s.settings.enablePriestFH,s.command.message(e+" : "+(s.settings.enablePriestFH?"enabled":"disabled"))):"hi"==e||"immersion"==e||"imm"==e||"healing"==e?(s.settings.enablePriestHI=!s.settings.enablePriestHI,s.command.message(e+" : "+(s.settings.enablePriestHI?"enabled":"disabled"))):"plague"==e||"poe"==e?(s.settings.enablePriestPlague=!s.settings.enablePriestPlague,s.command.message(e+" : "+(s.settings.enablePriestPlague?"enabled":"disabled"))):"sleep"==e?(s.settings.enablePriestSleep=!s.settings.enablePriestSleep,s.command.message(e+" : "+(s.settings.enablePriestSleep?"enabled":"disabled"))):"es"==e||"energy"==e||"estars"==e?(s.settings.enablePriestES=!s.settings.enablePriestES,s.command.message(e+" : "+(s.settings.enablePriestES?"enabled":"disabled"))):(s.command.message("UGGA BOOGA PEEPOPOOPEE~"),s.command.message("Go read commands pepega"))}),s.command.add("automystic",e=>{e&&(e=e.toLowerCase()),null==e?(s.command.message("UwU Hi you cute healer. These are your mystic settings!"),s.command.message("TF : "+(s.settings.enableMysticTF?"enabled":"disabled")),s.command.message("Cleanse : "+(s.settings.enableMysticACT?"enabled":"disabled")),s.command.message("Sleep : "+(s.settings.enableMysticSleep?"enabled":"disabled")),s.command.message("Volley : "+(s.settings.enableMysticVoC?"enabled":"disabled")),s.command.message("Contagion : "+(s.settings.enableMysticCont?"enabled":"disabled")),s.command.message("Wrath : "+(s.settings.enableMysticToW?"enabled":"disabled"))):"tf"==e?(s.settings.enableMysticTF=!s.settings.enableMysticTF,s.command.message(e+" : "+(s.settings.enableMysticTF?"enabled":"disabled"))):"act"==e?(s.settings.enableMysticACT=!s.settings.enableMysticACT,s.command.message(e+" : "+(s.settings.enableMysticACT?"enabled":"disabled"))):"sleep"==e?(s.settings.enableMysticSleep=!s.settings.enableMysticSleep,s.command.message(e+" : "+(s.settings.enableMysticSleep?"enabled":"disabled"))):"voc"==e?(s.settings.enableMysticVoC=!s.settings.enableMysticVoC,s.command.message(e+" : "+(s.settings.enableMysticVoC?"enabled":"disabled"))):"cont"==e?(s.settings.enableMysticCont=!s.settings.enableMysticCont,s.command.message(e+" : "+(s.settings.enableMysticCont?"enabled":"disabled"))):"tow"==e||"wrath"==e?(s.settings.enableMysticToW=!s.settings.enableMysticToW,s.command.message(e+" : "+(s.settings.enableMysticToW?"enabled":"disabled"))):(s.command.message("UGGA BOOGA PEEPOPOOPEE~"),s.command.message("Go read commands pepega"))}),s.game.on("enter_game",()=>{r=(s.game.me.templateId-10101)%100,s.settings.allySkills[r]||s.settings.enemySkills[r]?t.length||(f("S_PARTY_MEMBER_LIST","*",e=>{let t=i;if(i=e.members.filter(e=>e.playerId!=s.game.me.playerId),t)for(let a=0;a<i.length;a++){let n=t.find(e=>e.playerId==i[a].playerId);n&&(i[a].gameId=n.gameId,n.loc&&(i[a].loc=n.loc))}}),f("S_LEAVE_PARTY",1,e=>{i=[]}),f("C_PLAYER_LOCATION",5,e=>{n=e}),f("S_SPAWN_ME",3,e=>{n.loc=e.loc,n.w=e.w}),f("S_SPAWN_USER","*",e=>{if(0!=i.length){let s=i.find(s=>s.playerId===e.playerId);s&&(s.gameId=e.gameId,s.loc=e.loc,s.alive=e.alive,s.hpP=e.alive?100:0)}[3].includes(e.relation)&&l.push(e.gameId)}),f("S_USER_LOCATION","*",e=>{let s=i.find(s=>s.gameId===e.gameId);s&&(s.loc=e.loc)}),f("S_USER_LOCATION_IN_ACTION",2,e=>{let s=i.find(s=>s.gameId===e.gameId);s&&(s.loc=e.loc)}),f("S_INSTANT_DASH",3,e=>{let s=i.find(s=>s.gameId===e.gameId);s&&(s.loc=e.loc)}),f("S_PARTY_MEMBER_CHANGE_HP",4,e=>{if(s.game.me.playerId==e.playerId)return;let t=i.find(s=>s.playerId===e.playerId);t&&(t.hpP=Number(e.currentHp)/Number(e.maxHp)*100)}),f("S_PARTY_MEMBER_STAT_UPDATE","*",e=>{if(s.game.me.playerId==e.playerId)return;let t=i.find(s=>s.playerId===e.playerId);t&&(t.hpP=Number(e.hp)/Number(e.maxHp)*100,t.alive=e.alive)}),f("S_DEAD_LOCATION","*",e=>{let s=i.find(s=>s.gameId===e.gameId);s&&(s.loc=e.loc,s.hpP=0,s.alive=!1)}),f("S_LEAVE_PARTY_MEMBER","*",e=>{i=i.filter(s=>s.playerId!=e.playerId)}),f("S_LOGOUT_PARTY_MEMBER","*",e=>{let s=i.find(s=>s.playerId===e.playerId);s&&(s.online=!1)}),f("S_BAN_PARTY_MEMBER","*",e=>{i=i.filter(s=>s.playerId!=e.playerId)}),f("S_BOSS_GAGE_INFO","*",e=>{let s=l.indexOf(e.id);s>-1&&l.splice(s,1),l.push(e.id)}),f("S_SPAWN_NPC","*",e=>{h[e.huntingZoneId]&&h[e.huntingZoneId].includes(e.templateId)&&d.push(e.gameId),p[e.huntingZoneId]&&p[e.huntingZoneId].includes(e.templateId)&&g.push(e.gameId),o[e.gameId]=e.loc,10238008==e.templateId&&1023==e.huntingZoneId&&e.owner==s.game.me.gameId&&c.push(e.gameId)}),f("S_ACTION_END","*",{filter:{fake:null}},e=>{10==Math.floor(e.skill.id/1e4)&&e.gameId==s.game.me.gameId&&(u=!1)}),f("S_ACTION_STAGE","*",{filter:{fake:null}},e=>{if(10==Math.floor(e.skill.id/1e4)){if(e.gameId!=s.game.me.gameId)return;u=!0}if(c.includes(e.gameId)&&s.settings.enableMysticToW)switch(e.skill.id){case 1101:b=s.setTimeout(()=>{u||s.send("C_START_SKILL",7,{skill:{reserved:0,npc:!1,type:1,huntingZoneId:0,id:350100},loc:n.loc,w:n.w,unk:!0,moving:!0,continue:!1,target:l[0],unk2:!1})},4800/e.speed);break;case 1102:b=s.setTimeout(()=>{u||s.send("C_START_SKILL",7,{skill:{reserved:0,npc:!1,type:1,huntingZoneId:0,id:350100},loc:n.loc,w:n.w,unk:!0,moving:!0,continue:!1,target:l[0],unk2:!1})},4054/e.speed);break;case 1103:b=s.setTimeout(()=>{u||s.send("C_START_SKILL",7,{skill:{reserved:0,npc:!1,type:1,huntingZoneId:0,id:350100},loc:n.loc,w:n.w,unk:!0,moving:!0,continue:!1,target:l[0],unk2:!1})},2e3/e.speed)}}),f("S_DESPAWN_NPC",3,e=>{let t=l.indexOf(e.gameId);t>-1&&l.splice(t,1);let a=d.indexOf(e.gameId);a>-1&&d.splice(a,1);let n=g.indexOf(e.gameId);n>-1&&g.splice(n,1);let i=m.indexOf(e.gameId);i>-1&&m.splice(i,1);let r=o.indexOf(e.gameId);r>-1&&o.splice(r,1);let $=c.indexOf(e.gameId);$>-1&&(c.splice($,1),s.clearTimeout(b))}),f("S_DESPAWN_USER",3,e=>{let t=l.indexOf(e.gameId);t>-1&&l.splice(t,1);let a=d.indexOf(e.gameId);a>-1&&d.splice(a,1);let n=g.indexOf(e.gameId);n>-1&&g.splice(n,1);let i=m.indexOf(e.gameId);i>-1&&m.splice(i,1);let r=o.indexOf(e.gameId);r>-1&&o.splice(r,1);let $=c.indexOf(e.gameId);$>-1&&(c.splice($,1),s.clearTimeout(b))}),f("S_NPC_LOCATION",3,e=>{o[e.gameId]=e.loc}),f("S_LOAD_TOPO","event",e=>{l=[],d=[],g=[],o=[],m=[],c=[]}),f("S_ABNORMALITY_BEGIN","*",e=>{if(![30372204,90442204].includes(e.id))return;let s=d.indexOf(e.target);s>-1&&d.splice(s,1);let t=m.indexOf(e.target);t>-1&&m.splice(t,1)}),f("S_ABNORMALITY_BEGIN","*",e=>{if(![90442202,30372202].includes(e.id))return;let s=d.indexOf(e.target);-1==s&&d.push(e.target)}),f("S_ABNORMALITY_BEGIN","*",e=>{if(![701101,801202].includes(e.id))return;let s=d.indexOf(e.target);s>-1&&m.push(d.splice(s,1)[0])}),f("S_ABNORMALITY_END",1,e=>{if(![701101,801202].includes(e.id))return;let s=m.indexOf(e.target);s>-1&&d.push(m.splice(s,1)[0])}),f("C_START_SKILL",7,{order:-1/0,filter:{fake:!1}},e=>{if(0==i.length)return;if(e.skill.id/10&!0){n.w=e.w;return}let t=Math.floor(e.skill.id/1e4);if(s.settings.allySkills[r]&&s.settings.allySkills[r].includes(t)){switch(t){case 41:if(!s.settings.enableMysticCont)return;break;case 37:if(!s.settings.enablePriestHI)return;break;case 35:if(!s.settings.enablePriestES)return;break;case 33:if(!s.settings.enablePriestSleep)return;break;case 30:if(!s.settings.enablePriestPlague)return;break;case 28:if(!s.settings.enableMysticSleep)return;break;case 24:if(!s.settings.enableMysticVoC)return;break;case 19:if(!s.settings.enablePriestFH)return;break;case 9:if(!s.settings.enableMysticACT)return;break;case 5:if(!s.settings.enableMysticTF)return;break;default:s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD");return}let l=[],d=_(t);9!=t&&i.sort(function(e,s){return parseFloat(e.hpP)-parseFloat(s.hpP)});for(let m=0,g=i.length;m<g&&(!(i[m].online&&i[m].alive&&void 0!=i[m].hpP&&0!=i[m].hpP&&(9==t||i[m].hpP<=s.settings.hpCutoff)&&void 0!=i[m].loc&&i[m].loc.dist3D(n.loc)/25<=s.settings.maxDistance)||(l.push(i[m]),l.length!=d));m++);if(l.length>0){a&&A(e.skill);for(let o=0,c=l.length;o<c;o++)setTimeout(()=>{s.send("C_CAN_LOCKON_TARGET",3,{target:l[o].gameId,skill:e.skill.id})},s.settings.lockSpeed);s.settings.autoCast&&setTimeout(()=>{s.send("C_START_SKILL",7,Object.assign({},e,{w:n.w,skill:e.skill.id+10}))},Math.max(s.settings.castSpeed,s.settings.lockSpeed+10))}}}),f("C_START_SKILL",7,{order:-1/0,filter:{fake:!1}},e=>{if(e.skill.id/10&!0){n.w=e.w;return}let t=Math.floor(e.skill.id/1e4);if(s.settings.enemySkills[r]&&s.settings.enemySkills[r].includes(t)){let i=[],m=_(t);switch(t){case 41:if(!s.settings.enableMysticCont)return;break;case 37:if(!s.settings.enablePriestHI)return;break;case 35:if(!s.settings.enablePriestES)return;break;case 33:if(!s.settings.enablePriestSleep)return;break;case 30:if(!s.settings.enablePriestPlague)return;break;case 28:if(!s.settings.enableMysticSleep)return;break;case 24:if(!s.settings.enableMysticVoC)return;break;case 19:if(!s.settings.enablePriestFH)return;break;case 9:if(!s.settings.enableMysticACT)return;break;case 5:if(!s.settings.enableMysticTF)return;break;default:s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD"),s.command.message("UH OH DANGER UGGA BOOGA!?!?! Contact Kygas and tell him when this happened :DDDD");return}switch(t){case 41:case 35:case 24:i=i.concat(l);break;case 30:i=i.concat(g);break;case 28:case 33:i=i.concat(d);break;default:return}if(0==i.length)return;let c=[];for(let $=0,u=i.length;$<u&&(!(void 0!=o[i[$]]&&o[i[$]].dist3D(n.loc)/25<=s.settings.maxDistance)||(c.push(i[$]),c.length!=m));$++);if(c.length>0){a&&A(e.skill);for(let b=0,h=c.length;b<h;b++)setTimeout(()=>{s.send("C_CAN_LOCKON_TARGET",3,{target:c[b],skill:e.skill.id})},s.settings.lockSpeed);s.settings.autoCast&&setTimeout(()=>{s.send("C_START_SKILL",7,Object.assign({},e,{w:n.w,skill:e.skill.id+10}))},Math.max(s.settings.castSpeed,s.settings.lockSpeed+10))}}}),f("S_CREST_INFO",2,e=>{$=e.crests}),f("S_CREST_APPLY",2,e=>{let s=$.find(s=>s.id==e.id);s&&(s.enable=e.enable)})):function e(){if(t.length){for(let a of t)s.unhook(a);t=[]}}()})};